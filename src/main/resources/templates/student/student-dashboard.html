<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="fragments/layout :: head('Student Dashboard')"></head>
<body class="student-layout">
    <nav th:replace="fragments/layout :: studentSidebar"></nav>
    
    <div class="main-content">
        <header th:replace="fragments/layout :: header"></header>
        
        <div class="dashboard-container">
            <h1>Student Dashboard</h1>
            
            <div class="welcome-card" th:if="${student.room == null}">
                <div class="welcome-icon">
                    <!-- SVG welcome icon can be added here -->
                    <!-- <img th:src="@{/images/welcome-icon.svg}" alt="Welcome"> -->
                </div>
                <div class="welcome-content">
                    <h2>Welcome, <span th:text="${student.name}">John</span>!</h2>
                    <p>You haven't requested a room yet. Browse available rooms and submit a request.</p>
                    <a th:href="@{/student/rooms}" class="btn btn-primary">Browse Rooms</a>
                </div>
            </div>
            
            <div class="room-status-card" th:if="${student.room != null}">
                <div class="room-status-header">
                    <h2>Your Room</h2>
                    <span class="status-badge status-active">Assigned</span>
                </div>
                <div class="room-status-content">
                    <div class="room-info">
                        <div class="room-number" th:text="${student.room.number}">101</div>
                        <div class="room-details">
                            <div class="detail-row">
                                <div class="detail-label">Hostel:</div>
                                <div class="detail-value" th:text="${student.room.hostel.name}">Boys Hostel A</div>
                            </div>
                            <div class="detail-row">
                                <div class="detail-label">Floor:</div>
                                <div class="detail-value" th:text="${student.room.floor}">1</div>
                            </div>
                            <div class="detail-row">
                                <div class="detail-label">Type:</div>
                                <div class="detail-value" th:text="${student.room.type}">Single</div>
                            </div>
                            <div class="detail-row">
                                <div class="detail-label">Assigned On:</div>
                                <div class="detail-value" th:text="${#dates.format(student.roomAssignedDate, 'dd MMM yyyy')}">01 Jan 2023</div>
                            </div>
                        </div>
                    </div>
                    <div class="room-actions">
                        <a th:href="@{/student/room-details}" class="btn btn-primary">View Details</a>
                    </div>
                </div>
            </div>
            
            <div class="request-status-card" th:if="${latestRequest != null && student.room == null}">
                <div class="request-status-header">
                    <h2>Room Request Status</h2>
                    <span th:class="${'status-badge status-' + latestRequest.status}" th:text="${latestRequest.status}">Pending</span>
                </div>
                <div class="request-status-content">
                    <div class="detail-row">
                        <div class="detail-label">Request ID:</div>
                        <div class="detail-value" th:text="${latestRequest.id}">R001</div>
                    </div>
                    <div class="detail-row">
                        <div class="detail-label">Room Number:</div>
                        <div class="detail-value" th:text="${latestRequest.room.number}">101</div>
                    </div>
                    <div class="detail-row">
                        <div class="detail-label">Hostel:</div>
                        <div class="detail-value" th:text="${latestRequest.room.hostel.name}">Boys Hostel A</div>
                    </div>
                    <div class="detail-row">
                        <div class="detail-label">Requested On:</div>
                        <div class="detail-value" th:text="${#dates.format(latestRequest.requestDate, 'dd MMM yyyy')}">01 Jan 2023</div>
                    </div>
                    <div class="detail-row" th:if="${latestRequest.status == 'rejected' && latestRequest.rejectionReason != null}">
                        <div class="detail-label">Rejection Reason:</div>
                        <div class="detail-value" th:text="${latestRequest.rejectionReason}">Room not available</div>
                    </div>
                </div>
                <div class="request-actions">
                    <a th:href="@{/student/requests}" class="btn btn-primary">View All Requests</a>
                    <a th:if="${latestRequest.status == 'rejected'}" th:href="@{/student/rooms}" class="btn btn-secondary">Browse Rooms</a>
                </div>
            </div>
            
            <div class="dashboard-sections">
                <div class="section announcements">
                    <h2>Announcements</h2>
                    <div class="announcement-list">
                        <div th:if="${announcements.empty}" class="no-data">No announcements</div>
                        <div th:each="announcement : ${announcements}" class="announcement-item">
                            <div class="announcement-header">
                                <h3 th:text="${announcement.title}">Important Notice</h3>
                                <span class="announcement-date" th:text="${#dates.format(announcement.date, 'dd MMM yyyy')}">01 Jan 2023</span>
                            </div>
                            <div class="announcement-content" th:text="${announcement.content}">
                                This is an important announcement for all hostel residents.
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="section quick-links">
                    <h2>Quick Links</h2>
                    <div class="quick-link-buttons">
                        <a th:href="@{/student/profile}" class="quick-link">
                            <!-- SVG profile icon can be added here -->
                            <!-- <img th:src="@{/images/profile-icon.svg}" alt="Profile"> -->
                            My Profile
                        </a>
                        <a th:href="@{/student/rooms}" class="quick-link">
                            <!-- SVG room icon can be added here -->
                            <!-- <img th:src="@{/images/room-icon.svg}" alt="Rooms"> -->
                            Available Rooms
                        </a>
                        <a th:href="@{/student/requests}" class="quick-link">
                            <!-- SVG request icon can be added here -->
                            <!-- <img th:src="@{/images/request-icon.svg}" alt="Requests"> -->
                            My Requests
                        </a>
                        <a th:href="@{/student/support}" class="quick-link">
                            <!-- SVG support icon can be added here -->
                            <!-- <img th:src="@{/images/support-icon.svg}" alt="Support"> -->
                            Support
                        </a>
                    </div>
                </div>
            </div>
        </div>
        
        <footer th:replace="fragments/layout :: footer"></footer>
    </div>
</body>
</html>