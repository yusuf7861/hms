<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="fragments/layout :: head('Manage Students')"></head>
<body class="warden-layout">
    <nav th:replace="fragments/layout :: wardenSidebar"></nav>
    
    <div class="main-content">
        <header th:replace="fragments/layout :: header"></header>
        
        <div class="content-container">
            <div class="page-header">
                <h1>Manage Students</h1>
            </div>
            
            <div class="filter-section">
                <form th:action="@{/warden/students}" method="get" class="filter-form">
                    <div class="form-group">
                        <input type="text" name="search" th:value="${param.search}" placeholder="Search by name or ID...">
                    </div>
                    <div class="form-group">
                        <select name="roomStatus">
                            <option value="">All Students</option>
                            <option value="assigned" th:selected="${param.roomStatus == 'assigned'}">With Room</option>
                            <option value="unassigned" th:selected="${param.roomStatus == 'unassigned'}">Without Room</option>
                        </select>
                    </div>
                    <button type="submit" class="btn btn-filter">
                        <!-- SVG filter icon can be added here -->
                        <!-- <img th:src="@{/images/filter-icon.svg}" alt="Filter"> -->
                        Filter
                    </button>
                </form>
            </div>
            
            <div class="table-responsive">
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>Student ID</th>
                            <th>Name</th>
                            <th>Email</th>
                            <th>Course</th>
                            <th>Year</th>
                            <th>Room</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr th:if="${students.empty}">
                            <td colspan="7" class="no-data">No students found</td>
                        </tr>
                        <tr th:each="student : ${students}">
                            <td th:text="${student.studentId}">S12345</td>
                            <td th:text="${student.name}">John Doe</td>
                            <td th:text="${student.email}">john@example.com</td>
                            <td th:text="${student.course}">Computer Science</td>
                            <td th:text="${student.year}">2nd Year</td>
                            <td th:text="${student.room != null ? student.room.number : 'Not Assigned'}">101</td>
                            <td class="actions">
                                <a th:href="@{/warden/students/{id}/view(id=${student.id})}" class="btn-icon" title="View">
                                    <!-- SVG view icon can be added here -->
                                    <!-- <img th:src="@{/images/view-icon.svg}" alt="View"> -->
                                </a>
                                <a th:if="${student.room == null}" th:href="@{/warden/students/{id}/assign-room(id=${student.id})}" 
                                   class="btn-icon" title="Assign Room">
                                    <!-- SVG assign icon can be added here -->
                                    <!-- <img th:src="@{/images/assign-icon.svg}" alt="Assign"> -->
                                </a>
                                <a th:if="${student.room != null}" th:href="@{/warden/students/{id}/change-room(id=${student.id})}" 
                                   class="btn-icon" title="Change Room">
                                    <!-- SVG change icon can be added here -->
                                    <!-- <img th:src="@{/images/change-icon.svg}" alt="Change"> -->
                                </a>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            
            <div class="pagination" th:if="${totalPages > 1}">
                <a th:href="@{/warden/students(page=1, search=${param.search}, roomStatus=${param.roomStatus})}" 
                   class="page-link" th:classappend="${currentPage == 1 ? 'disabled' : ''}">First</a>
                   
                <a th:href="@{/warden/students(page=${currentPage - 1}, search=${param.search}, roomStatus=${param.roomStatus})}" 
                   class="page-link" th:classappend="${currentPage == 1 ? 'disabled' : ''}">Previous</a>
                   
                <span th:each="i : ${#numbers.sequence(1, totalPages)}">
                    <a th:href="@{/warden/students(page=${i}, search=${param.search}, roomStatus=${param.roomStatus})}" 
                       class="page-link" th:classappend="${currentPage == i ? 'active' : ''}" th:text="${i}">1</a>
                </span>
                
                <a th:href="@{/warden/students(page=${currentPage + 1}, search=${param.search}, roomStatus=${param.roomStatus})}" 
                   class="page-link" th:classappend="${currentPage == totalPages ? 'disabled' : ''}">Next</a>
                   
                <a th:href="@{/warden/students(page=${totalPages}, search=${param.search}, roomStatus=${param.roomStatus})}" 
                   class="page-link" th:classappend="${currentPage == totalPages ? 'disabled' : ''}">Last</a>
            </div>
        </div>
        
        <footer th:replace="fragments/layout :: footer"></footer>
    </div>
</body>
</html>