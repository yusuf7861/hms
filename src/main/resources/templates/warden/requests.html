<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="fragments/layout :: head('Room Requests')"></head>
<body class="warden-layout">
    <nav th:replace="fragments/layout :: wardenSidebar"></nav>
    
    <div class="main-content">
        <header th:replace="fragments/layout :: header"></header>
        
        <div class="content-container">
            <div class="page-header">
                <h1>Room Requests</h1>
            </div>
            
            <div class="filter-section">
                <form th:action="@{/warden/requests}" method="get" class="filter-form">
                    <div class="form-group">
                        <input type="text" name="search" th:value="${param.search}" placeholder="Search by student name...">
                    </div>
                    <div class="form-group">
                        <select name="status">
                            <option value="">All Status</option>
                            <option value="pending" th:selected="${param.status == 'pending'}">Pending</option>
                            <option value="approved" th:selected="${param.status == 'approved'}">Approved</option>
                            <option value="rejected" th:selected="${param.status == 'rejected'}">Rejected</option>
                        </select>
                    </div>
                    <button type="submit" class="btn btn-filter">
                        <!-- SVG filter icon can be added here -->
                        <!-- <img th:src="@{/images/filter-icon.svg}" alt="Filter"> -->
                        Filter
                    </button>
                </form>
            </div>
            
            <div class="table-responsive">
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>Request ID</th>
                            <th>Student Name</th>
                            <th>Student ID</th>
                            <th>Room Number</th>
                            <th>Request Date</th>
                            <th>Status</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr th:if="${requests.empty}">
                            <td colspan="7" class="no-data">No requests found</td>
                        </tr>
                        <tr th:each="request : ${requests}">
                            <td th:text="${request.id}">R001</td>
                            <td th:text="${request.student.name}">John Doe</td>
                            <td th:text="${request.student.studentId}">S12345</td>
                            <td th:text="${request.room.number}">101</td>
                            <td th:text="${#dates.format(request.requestDate, 'dd MMM yyyy')}">01 Jan 2023</td>
                            <td>
                                <span th:class="${'status-' + request.status}" th:text="${request.status}">Pending</span>
                            </td>
                            <td class="actions">
                                <a th:href="@{/warden/requests/{id}/view(id=${request.id})}" class="btn-icon" title="View">
                                    <!-- SVG view icon can be added here -->
                                    <!-- <img th:src="@{/images/view-icon.svg}" alt="View"> -->
                                </a>
                                <a th:if="${request.status == 'pending'}" th:href="@{/warden/requests/{id}/approve(id=${request.id})}" 
                                   class="btn-icon approve-btn" title="Approve">
                                    <!-- SVG approve icon can be added here -->
                                    <!-- <img th:src="@{/images/approve-icon.svg}" alt="Approve"> -->
                                </a>
                                <a th:if="${request.status == 'pending'}" th:href="@{/warden/requests/{id}/reject(id=${request.id})}" 
                                   class="btn-icon reject-btn" title="Reject">
                                    <!-- SVG reject icon can be added here -->
                                    <!-- <img th:src="@{/images/reject-icon.svg}" alt="Reject"> -->
                                </a>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            
            <div class="pagination" th:if="${totalPages > 1}">
                <a th:href="@{/warden/requests(page=1, search=${param.search}, status=${param.status})}" 
                   class="page-link" th:classappend="${currentPage == 1 ? 'disabled' : ''}">First</a>
                   
                <a th:href="@{/warden/requests(page=${currentPage - 1}, search=${param.search}, status=${param.status})}" 
                   class="page-link" th:classappend="${currentPage == 1 ? 'disabled' : ''}">Previous</a>
                   
                <span th:each="i : ${#numbers.sequence(1, totalPages)}">
                    <a th:href="@{/warden/requests(page=${i}, search=${param.search}, status=${param.status})}" 
                       class="page-link" th:classappend="${currentPage == i ? 'active' : ''}" th:text="${i}">1</a>
                </span>
                
                <a th:href="@{/warden/requests(page=${currentPage + 1}, search=${param.search}, status=${param.status})}" 
                   class="page-link" th:classappend="${currentPage == totalPages ? 'disabled' : ''}">Next</a>
                   
                <a th:href="@{/warden/requests(page=${totalPages}, search=${param.search}, status=${param.status})}" 
                   class="page-link" th:classappend="${currentPage == totalPages ? 'disabled' : ''}">Last</a>
            </div>
        </div>
        
        <footer th:replace="fragments/layout :: footer"></footer>
    </div>
</body>
</html>